---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostItem from '../components/PostItem.astro';
import { SITE_CONFIG, AVATAR } from '../site';
import { getPublishedPosts } from '../utils';

const recentPosts = (await getPublishedPosts()).slice(0, 5);
---

<BaseLayout>
  <!-- Intro -->
  <section class="mb-14">
    <div class="flex items-start justify-between">
      <div>
        <h1 class="text-2xl sm:text-4xl font-medium leading-tight mb-4">Dávid Miklós</h1>
        <p>
          I'm a software engineer at <a href="https://www.lizy.be/fr">LIZY</a>, where I build cloud platforms.
        </p>
        <p class="mt-4">
          What drives me most is improving how engineers work: better tooling,<br /> stronger patterns, healthier codebases.
        </p>
      </div>
      <img
        src={AVATAR}
        alt={SITE_CONFIG.name}
        class="hidden sm:block sm:w-32 sm:h-32 rounded-md object-cover shrink-0"
      />
    </div>
  </section>

  <!-- Recent posts -->
  {recentPosts.length > 0 && (
    <section class="mb-14">
      <h2 class="text-xl font-bold mb-4">Recent</h2>
      <ul class="list-none p-0 space-y-3">
        {recentPosts.map((post) => (
          <PostItem post={post} />
        ))}
      </ul>
      <a
        href="/blog"
        class="inline-block mt-4 text-sm text-muted hover:text-ink no-underline transition-colors"
      >
        All posts &rarr;
      </a>
    </section>
  )}

  <!-- Contact -->
  <section>
    <h2 class="text-2xl font-bold mb-4">Contact</h2>
    <p>
      Reach me at <a href={`mailto:${SITE_CONFIG.email}`}>{SITE_CONFIG.email}</a> or
      find me on <a href={SITE_CONFIG.social.linkedin}>LinkedIn</a>.
    </p>
    <p class="mt-4">
      You can also read my <a href="/blog">writing</a> or <a href={SITE_CONFIG.social.github}>code</a>.
    </p>
  </section></BaseLayout>
